jQuery(function($){"undefined"!=typeof $.fn.wpColorPicker?$(".color-field").wpColorPicker():$(".colorpicker-wrapper").each(function(){var t=$(this),e=$.farbtastic(t.find(".farbtastic-container").hide());e.linkTo(function(e){t.find("input").val(e),t.find(".color-indicator").css("background",e)}),e.setColor(t.find("input").val()),t.find("input").focus(function(){t.find(".farbtastic-container").show()}).blur(function(){t.find(".farbtastic-container").hide()})}),$("a.media-upload-button").click(function(t){var e=$(this),i=$(this).closest("td"),n=$(this).data("frame");return n?(n.open(),!1):(n=wp.media({title:e.data("choose"),library:{type:"image"},button:{text:e.data("update"),close:!1}}),e.data("frame",n),n.on("select",function(){var t=n.state().get("selection").first().attributes;i.find(".current .title").html(t.title),i.find("input[type=hidden]").val(t.id).change(),"undefined"!=typeof t.sizes?"undefined"!=typeof t.sizes.thumbnail?i.find(".current .thumbnail").attr("src",t.sizes.thumbnail.url).fadeIn():i.find(".current .thumbnail").attr("src",t.sizes.full.url).fadeIn():i.find(".current .thumbnail").attr("src",t.icon).fadeIn(),n.close()}),n.open(),!1)}),$(".media-field-wrapper").mouseenter(function(){""!=$(this).closest("td").find("input[type=hidden]").val()&&$(this).find(".media-remove-button").fadeIn("fast")}).mouseleave(function(){$(this).find(".media-remove-button").fadeOut("fast")}),$(".media-field-wrapper .current").mouseenter(function(){var t=$(this).find(".title");""!=t.html()&&t.fadeIn("fast")}).mouseleave(function(){$(this).find(".title").clearQueue().fadeOut("fast")}),$("a.media-remove-button").click(function(){var t=$(this).closest("td");t.find(".current .title").html(""),t.find("input[type=hidden]").val("").change(),t.find(".current .thumbnail").fadeOut("fast"),$(this).fadeOut("fast")});var t=$('form[action="options.php"]'),e=$("<h2></h2>").attr("id","siteorigin-settings-tab-wrapper").addClass("nav-tab-wrapper").prependTo(t);t.find("h3").each(function(i,n){var a=$(n).hide(),s=$('<a href="#"></a>').addClass("nav-tab").html(a.html()).appendTo(e);0==i&&s.addClass("nav-tab-active");var o=a.next().hide();s.click(function(){return s.addClass("nav-tab-active"),setTimeout(function(){e.find("a").not(s).removeClass("nav-tab-active")},50),t.find("> table").hide(),o.show(),$("#current-tab-field").val(i),setUserSetting("siteorigin_settings_tab",i),!1}),(i==getUserSetting("siteorigin_settings_tab",0)||0==i&&getUserSetting("siteorigin_settings_tab",0)>t.find("h3").length)&&s.click()}),$("body").on("change",".input-field-select",function(){var t=$(this).closest("td").find("input");t.val($(this).val())}),$("input.siteorigin-settings-has-options").keyup(function(){$(this).closest("td").find(".input-field-select").val($(this).val())}).keyup(),""!=window.location.hash&&$(window.location.hash).each(function(){var t=$(this),e=t.closest("tr"),i=t.closest("table");i.hasClass("form-table")&&($("#siteorigin-settings-tab-wrapper > a").eq($("table.form-table").index(i)).click(),e.addClass("highlight"),setTimeout(function(){e.find("input,select").focus()},250))}),$(".so-settings-gallery-edit").on({click:function(t){if(t.preventDefault(),"undefined"==typeof wp||!wp.media||!wp.media.gallery)return!1;event.preventDefault();var e=$(this),i=e.siblings('input[type="text"]').val();(0===i.indexOf("{demo")||0===i.indexOf("{default"))&&(i="-"),""==i&&null==$("#post_ID").val()&&(i="-");var n=wp.media.gallery.edit('[gallery ids="'+i+'"]');return n.state("gallery-edit").on("update",function(t){var i=t.models.map(function(t){return t.id}),n=e.siblings('input[type="text"]').val(i.join(","))}),!1}}),$(".so-settings-widget-edit").on("click",function(t){t.preventDefault();var e=$(this),i=e.closest("td").find(".so-settings-widget-form");return i.html(i.find(".so-settings-widget-form-template").html()),!1}).click(),setTimeout(function(){$("#setting-updated").slideUp()},5e3);var i;$("#siteorigin-settings-form .siteorigin-settings-preview-button").click(function(t){t.preventDefault(),null==i?i=$($("#settings-preview-modal-template").html()).appendTo("body"):i.show();var e=function(){var t=$("#siteorigin-settings-form");t.attr({target:"siteorigin-settings-preview-iframe",action:i.find("iframe").attr("src")});var e=$('<input type="hidden" name="siteorigin_settings_is_preview" value="true" />').appendTo(t);t.submit(),e.remove(),t.attr({target:"_self",action:"options.php"})};e(),i.find("iframe").load(function(){var t=$(this);$(this).contents().find("a").click(function(i){i.preventDefault();var n=$(this).prop("href").split("#")[0];return 0!=n.indexOf(t.data("home"))||n==t.attr("src")?!1:(t.attr("src",n),void e())})}),i.find(".siteorigin-settings-close").click(function(){i.hide()})}),t.find("[data-conditional]").each(function(){var e=$(this),i=e.closest("tr"),n=e.data("conditional");if("undefined"==typeof n.show&&(n.show="else"),"undefined"==typeof n.hide&&(n.hide="else"),"else"!==n.hide||"else"!==n.show){var a=function(e){if("undefined"==typeof n[e]||"else"===n[e])return null;var i=!0,a=null,s=null;for(var o in n[e])s=t.find("[data-field="+o+"]").find("input,select,textarea"),a=n[e][o].split("|"),-1===a.indexOf(s.val())&&i&&(i=!1);return i},s=function(){"else"===n.show?a("hide")?i.hide():i.show():"else"===n.hide?a("show")?i.show():i.hide():(a("hide")&&i.hide(),a("show")&&i.show())};t.find("input,select").on("change keyup",s),s()}})});