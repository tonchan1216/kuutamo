var Page=(function(){var d={$bookBlock:$("#bb-bookblock"),$navNext:$("#bb-nav-next"),$navPrev:$("#bb-nav-prev"),$navFirst:$("#bb-nav-first"),$navmark:$("#head-nav")},f=0,a={1:"concept",2:"menu",5:"info",6:"book",7:"news"};function g(){d.$bookBlock.bookblock({speed:800,shadowSides:0.8,shadowFlip:0.7,onEndFlip:function(h,j,i){f=j;e(i);b(j+1);return false}});c();d.$navPrev.hide()}function c(){var i=d.$bookBlock.children();var h=d.$navmark.find("li");d.$navNext.on("click touchstart",function(){d.$bookBlock.bookblock("next");return false});d.$navPrev.on("click touchstart",function(){d.$bookBlock.bookblock("prev");return false});$.each(a,function(j,k){$(".nav-"+k).children("a").on("click touchstart",function(l){$(this).parent().siblings().removeClass("active");$(this).parent().addClass("active");d.$bookBlock.bookblock("jump",j);return false})});i.on({swipeleft:function(j){d.$bookBlock.bookblock("next");return false},swiperight:function(j){d.$bookBlock.bookblock("prev");return false}});$(document).keydown(function(l){var k=l.keyCode||l.which,j={left:37,up:38,right:39,down:40};switch(k){case j.left:d.$bookBlock.bookblock("prev");break;case j.right:d.$bookBlock.bookblock("next");break}})}function e(h){if(f===0){d.$navNext.show();d.$navPrev.hide()}else{if(h){d.$navNext.hide();d.$navPrev.show()}else{d.$navNext.show();d.$navPrev.show()}}}function b(h){$("#head-nav").find("li").removeClass("active");if(!a[h]){$(".nav-menu").addClass("active")}else{$(".nav-"+a[h]).addClass("active")}}return{init:g}})();